<style>
  :root {
    --primary-color: #48BB78;
    --primary-dark: #2e7d32;
    --secondary-color: #8BC34A;
    --accent-color: #48BB78;
    --accent-dark: #2e7d32;
    --text-color: #2D3748;
    --light-bg: #F7FAFC;
    --white: #FFFFFF;
    --footer-bg: #222831;
    --shadow: 0 2px 8px rgba(44, 82, 130, 0.07);
    --transition: .2s;
  }
  .planos-section {
    background: var(--light-bg);
    border-radius: 30px;
    box-shadow: 0 8px 32px 0 rgba(44, 62, 80, 0.10);
    padding: 3rem 1rem 5rem 1rem;
    max-width: 1200px;
    margin: 3rem auto;
    color: var(--text-color);
  }
  .planos-titulo {
    color: var(--primary-dark);
    font-size: 2.2rem;
    font-weight: 700;
    letter-spacing: .5px;
    margin-bottom: .7rem;
    text-align: center;
  }
  .planos-descricao {
    color: var(--text-color);
    font-size: 1.14rem;
    margin-bottom: 2.2rem;
    text-align: center;
  }
  .nivel-container {
    background: var(--white);
    border-radius: 18px;
    padding: 1.5rem 1.5rem 1rem 1.5rem;
    margin-bottom: 1.8rem;
    box-shadow: var(--shadow);
    max-width: 510px;
    margin-left: auto;
    margin-right: auto;
  }
  .nivel-slider {
    width: 100%;
    accent-color: var(--primary-color);
    margin: 0.7rem 0 0 0;
    height: 8px;
    background: linear-gradient(90deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    border-radius: 5px;
    outline: none;
  }
  .nivel-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 0.6rem;
    font-size: 1rem;
    color: var(--primary-dark);
    font-weight: 500;
  }
  .plano-btn {
    padding: 0.65rem 1.7rem;
    margin: 0 0.5rem;
    background: var(--primary-color);
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-weight: bold;
    color: var(--white);
    font-size: 1rem;
    box-shadow: var(--shadow);
    transition: background var(--transition), color var(--transition), box-shadow var(--transition);
    outline: none;
  }
  .plano-btn.active,
  .plano-btn:hover {
    background: var(--primary-dark);
    color: var(--white);
    box-shadow: 0 4px 18px var(--secondary-color);
  }
  .carousel-container {
    position: relative;
    width: 100%;
    overflow: hidden;
    margin: 0 auto;
    max-width: 1000px;
    background: var(--white);
    border-radius: 22px;
    box-shadow: 0 2px 16px #c4e3d733;
    padding: 2.2rem 0 1.7rem 0;
    color: var(--text-color);
  }
  .carousel-track {
    display: flex;
    transition: transform 0.5s cubic-bezier(.4,0,.2,1);
    will-change: transform;
    touch-action: pan-x;
    min-height: 370px;
  }
  .plano-card {
    min-width: 320px;
    max-width: 350px;
    margin: 0 1.1rem;
    background: var(--white);
    border-radius: 22px;
    padding: 2rem 1.1rem 2.2rem 1.1rem;
    box-shadow: 0 8px 32px 0 rgba(44, 62, 80, 0.13);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    flex-shrink: 0;
    user-select: none;
    border: 2.5px solid var(--secondary-color);
    position: relative;
    animation: fadeIn .6s;
    transition: box-shadow 0.2s, border 0.2s;
    color: var(--text-color);
  }
  .plano-card:hover {
    box-shadow: 0 12px 42px 0 rgba(44, 62, 80, 0.18);
    border: 2.5px solid var(--primary-color);
  }
  .plano-card img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 12px;
    margin-bottom: 1.2rem;
    box-shadow: 0 2px 10px var(--secondary-color);
    border: 1.5px solid var(--primary-color);
  }
  .plano-card h3 {
    color: var(--primary-dark);
    font-size: 1.2rem;
    margin-bottom: 0.8rem;
    font-weight: 700;
  }
  .preco {
    font-size: 2rem;
    margin: 1.1rem 0 1.6rem 0;
    font-weight: bold;
    color: var(--text-color);
    background: none;
    -webkit-background-clip: unset;
    -webkit-text-fill-color: unset;
  }
  .btn-primary {
    background: var(--primary-color);
    color: var(--white);
    padding: 0.75rem 2.2rem;
    border: none;
    border-radius: 25px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
    box-shadow: 0 4px 20px var(--secondary-color);
    transition: background var(--transition), color var(--transition), box-shadow var(--transition);
  }
  .btn-primary:hover {
    background: var(--primary-dark);
    color: var(--white);
    box-shadow: 0 4px 22px var(--primary-dark);
  }
  .carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: var(--primary-color);
    color: var(--white);
    border: none;
    border-radius: 50%;
    width: 48px;
    height: 48px;
    font-size: 2rem;
    cursor: pointer;
    outline: none;
    z-index: 2;
    opacity: 0.92;
    box-shadow: 0 2px 10px #c4e3d755;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background var(--transition), color var(--transition), box-shadow var(--transition);
  }
  .carousel-arrow:active,
  .carousel-arrow:hover {
    background: var(--primary-dark);
    color: var(--white);
    box-shadow: 0 6px 18px var(--primary-dark);
  }
  .carousel-arrow.left {
    left: 1rem;
  }
  .carousel-arrow.right {
    right: 1rem;
  }
  @media (max-width: 1000px) {
    .carousel-container { max-width: 700px;}
    .plano-card { min-width: 260px; max-width: 320px;}
  }
  @media (max-width: 768px) {
    .carousel-container { max-width: 95vw;}
    .plano-card { min-width: 90vw; max-width: 90vw; margin: 0 0.5rem;}
    .carousel-arrow { width: 38px; height: 38px; font-size: 1.3rem;}
    .planos-titulo {font-size:1.3rem;}
  }
  @keyframes fadeIn {
    from { opacity: 0.3; transform: translateY(22px);}
    to   { opacity: 1; transform: translateY(0);}
  }
</style>

<section class="planos-section" id="planos">
  <h2 class="planos-titulo">Planos Personalizados para Cada Perfil</h2>
  <p class="planos-descricao">Escolha o nível de cuidados e o período. Veja os valores por quarto e modalidade de pagamento.</p>

  <div class="nivel-container">
    <label for="nivelCuidados" style="display:block; font-weight:bold; margin-bottom:0.5rem;">
      Nível de Cuidados:
    </label>
    <input type="range" id="nivelCuidados" min="1" max="3" value="1" class="nivel-slider">
    <div class="nivel-labels">
      <span>Nível 1 - Lúcido</span>
      <span>Nível 2 - Cuidados Moderados</span>
      <span>Nível 3 - Alta Complexidade</span>
    </div>
  </div>
  <div style="margin: 2rem 0; text-align:center;">
    <button class="plano-btn active" onclick="setFrequencia('mensal')">Mensal</button>
    <button class="plano-btn" onclick="setFrequencia('semestral')">Semestral</button>
    <button class="plano-btn" onclick="setFrequencia('anual')">Anual</button>
  </div>

  <div class="carousel-container" id="carouselContainer">
    <button class="carousel-arrow left" id="carouselPrevBtn">&#8592;</button>
    <div class="carousel-track" id="carouselTrack">
      <!-- Cards serão inseridos via JS -->
    </div>
    <button class="carousel-arrow right" id="carouselNextBtn">&#8594;</button>
  </div>
</section>

<script>
  let frequencia = 'mensal';
  const quartos = [
    { cod: "q1", label: "Quarto Individual", img: "quarto1.jpg" },
    { cod: "q2", label: "Quarto Duplo", img: "quarto2.jpg" },
    { cod: "q3", label: "Quarto Triplo ou mais", img: "quarto3.jpg" }
  ];

  function setFrequencia(tipo) {
    frequencia = tipo;
    document.querySelectorAll('.plano-btn').forEach(btn => {
      btn.classList.remove('active');
      if (btn.textContent.toLowerCase().includes(tipo)) {
        btn.classList.add('active');
      }
    });
    atualizarCarousel();
  }

  function formatarPreco(valor) {
    return valor.toLocaleString('pt-BR', {
      style: 'currency',
      currency: 'BRL'
    });
  }

  let currentIndex = 0;

  function atualizarCarousel() {
    const nivel = parseInt(document.getElementById("nivelCuidados").value);
    const base = 3000;
    const multiplicadores = {
      q1: 1.2, // Individual
      q2: 1.1, // Duplo
      q3: 1,   // Triplo ou mais
      nivel: [1, 1.3, 1.6],
      frequencia: { mensal: 1, semestral: 0.95, anual: 0.85 }
    };

    const carouselTrack = document.getElementById('carouselTrack');
    carouselTrack.innerHTML = '';
    quartos.forEach((quarto, i) => {
      const preco = Math.round(
        base *
        multiplicadores[quarto.cod] *
        multiplicadores.nivel[nivel - 1] *
        multiplicadores.frequencia[frequencia]
      );
      const card = document.createElement('div');
      card.className = 'plano-card';
      card.innerHTML = `
        <img src="${quarto.img}" alt="${quarto.label}">
        <h3>${quarto.label}</h3>
        <p class="preco">${formatarPreco(preco)}/mês</p>
        <a href="https://wa.me/550000000000" class="btn-primary" target="_blank">Contratar</a>
      `;
      carouselTrack.appendChild(card);
    });
    moveCarousel(currentIndex);
  }

  function moveCarousel(index) {
    const carouselTrack = document.getElementById('carouselTrack');
    const total = quartos.length;
    let visible = 3;
    if(window.innerWidth < 1000 && window.innerWidth >= 768) visible = 2;
    if(window.innerWidth < 768) visible = 1;
    if(index < 0) index = 0;
    if(index > total - visible) index = total - visible;
    currentIndex = index;
    const card = carouselTrack.querySelector('.plano-card');
    if(card) {
      const cardWidth = card.offsetWidth + 32;
      carouselTrack.style.transform = `translateX(-${index * cardWidth}px)`;
    }
    document.getElementById('carouselPrevBtn').style.visibility = (currentIndex === 0) ? "hidden" : "visible";
    document.getElementById('carouselNextBtn').style.visibility = (currentIndex >= (total - visible)) ? "hidden" : "visible";
  }

  document.addEventListener('DOMContentLoaded', () => {
    atualizarCarousel();
    document.getElementById("nivelCuidados").addEventListener('input', atualizarCarousel);

    document.getElementById('carouselPrevBtn').onclick = () => moveCarousel(currentIndex - 1);
    document.getElementById('carouselNextBtn').onclick = () => moveCarousel(currentIndex + 1);

    window.addEventListener('resize', () => moveCarousel(currentIndex));

    // Touch/Swipe para mobile - NÃO trava o scroll vertical
    const carouselTrack = document.getElementById('carouselTrack');
    let startX = null, startY = null, isDragging = false;

    carouselTrack.addEventListener('touchstart', function(e){
      if(e.touches.length === 1){
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        isDragging = false;
      }
    });
    carouselTrack.addEventListener('touchmove', function(e){
      if(startX !== null && startY !== null){
        const dx = e.touches[0].clientX - startX;
        const dy = e.touches[0].clientY - startY;
        if(!isDragging && Math.abs(dx) > 10 && Math.abs(dx) > Math.abs(dy) * 1.5){
          isDragging = true;
          e.preventDefault();
        }
        if(isDragging && Math.abs(dx) > 50){
          if(dx < 0) moveCarousel(currentIndex + 1);
          else moveCarousel(currentIndex - 1);
          startX = null; startY = null; isDragging = false;
        }
      }
    }, { passive: false });
    carouselTrack.addEventListener('touchend', function(){
      startX = null; startY = null; isDragging = false;
    });
  });
</script>